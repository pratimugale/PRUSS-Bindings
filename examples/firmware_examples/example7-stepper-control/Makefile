all: clean config pru0 pru1 userspace

config:
	@echo ' ------------------------------------------------------------------'
	@echo ' --------------------     SETTING PINMUX      ---------------------' 
	@echo ' ------------------------------------------------------------------'
	@config-pin P9-31 pruout

pru0: 
	@cd ./PRU0/ && make
	@echo ' ------------------------------------------------------------------'
	@echo ' -------------------- PRU 0 FIRMWARE COMPILED  --------------------' 
	@echo ' ------------------------------------------------------------------'
	@cd ./PRU0/ && sudo make install
	@echo ' ------------------------------------------------------------------'
	@echo ' -------------------- PRU 0 FIRMWARE INSTALLED --------------------' 
	@echo ' ------------------------------------------------------------------'

pru1:
	@cd ./PRU1/ && make
	@echo ' ------------------------------------------------------------------'
	@echo ' -------------------- PRU 1 FIRMWARE COMPILED  --------------------' 
	@echo ' ------------------------------------------------------------------'
	@cd ./PRU1/ && make install
	@echo ' ------------------------------------------------------------------'
	@echo ' -------------------- PRU 1 FIRMWARE INSTALLED --------------------' 
	@echo ' ------------------------------------------------------------------'

userspace:
	@g++ user_test.cpp driver_lib.cpp ../../../cpp-bindings/pruss.cpp -o userspace.o
	@echo ' ------------------------------------------------------------------'
	@echo ' --------------------UserSpace Program Compiled--------------------' 
	@echo ' ------------------------------------------------------------------'
	@echo 'Started Executing Stepper Motor Commands'
	@./userspace.o
	@echo ' ------------------------------------------------------------------'
	@echo ' --------------------   Completed Execution    --------------------' 
	@echo ' ------------------------------------------------------------------'

clean:
	@cd ./PRU0/ && make clean
	@cd ./PRU1/ && make clean
