all: clean config pru0 pru1 userspace

config: 
	@echo ' -----------------------------------------------------------------'
	@echo ' --------------------     SETTING PINMUX      --------------------' 
	@echo ' -----------------------------------------------------------------'
	@config-pin P9-31 pruout
	@echo 'Waveform 1: P9_31'
	@config-pin P9-30 pruout
	@echo 'Waveform 2: P9_30'
	@config-pin P9-29 pruout
	@echo 'Waveform 3: P9_29'
	@config-pin P9-28 pruout
	@echo 'Waveform 4: P9_28'
	@config-pin P9-27 pruout
	@echo 'Waveform 5: P9_27'
	@config-pin P9-25 pruout
	@echo 'Waveform 6: P9_25'
	@config-pin P8-11 pruout
	@echo 'Waveform 7: P8_11'
	@config-pin P8-12 pruout
	@echo 'Waveform 8: P8_12'

pru0:
	@cd ./PRU0/ && make
	@echo ' -----------------------------------------------------------------'
	@echo ' -------------------- PRU 0 FIRMWARE COMPILED  --------------------' 
	@echo ' ------------------------------------------------------------------'
	@cd ./PRU0/ && sudo make install
	@echo ' -----------------------------------------------------------------'
	@echo ' -------------------- PRU 0 FIRMWARE INSTALLED --------------------' 
	@echo ' ------------------------------------------------------------------'

pru1:
	@cd ./PRU1/ && make
	@echo ' -----------------------------------------------------------------'
	@echo ' -------------------- PRU 1 FIRMWARE COMPILED  --------------------' 
	@echo ' ------------------------------------------------------------------'
	@cd ./PRU1/ && make install
	@echo ' -----------------------------------------------------------------'
	@echo ' -------------------- PRU 1 FIRMWARE INSTALLED --------------------' 
	@echo ' ------------------------------------------------------------------'

userspace:
	@g++ userspace.cpp ../../../cpp-bindings/pruss.cpp -o userspace2.o
	@echo ' -----------------------------------------------------------------'
	@echo ' --------------------UserSpace Program Compiled--------------------' 
	@echo ' ------------------------------------------------------------------'
	@./userspace2.o
	@echo ' -----------------------------------------------------------------'
	@echo ' --------------------   Completed Execution    --------------------' 
	@echo ' ------------------------------------------------------------------'

clean:
	@echo ' -----------------------------------------------------------------'
	@echo ' --------------------          CLEAN           --------------------' 
	@echo ' ------------------------------------------------------------------'
	@cd ./PRU0/ && make clean
	@cd ./PRU1/ && make clean
